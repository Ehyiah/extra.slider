(function(a){var b=window.$window||a(window);a.fn.extraSlider=function(c){var d=a.extend({auto:false,draggable:false,keyboard:false,margin:0,navigate:true,paginate:true,paginateContent:"",resizable:true,speed:0.5,type:"slide",onInit:null,onMoveStart:null,onMoveEnd:null,onPause:null,onResume:null},c);this.each(function(){var l=a(this),v=a("> .wrapper",this),A=v.find("> ul"),g=A.find("> li"),j,u=l.find(".navigation"),q=l.find(".pagination"),t=0,s=0,E=g.length,f=Math.ceil(v.width()/t),p=1,y=E,w=0,h,x,m=0,B;function z(){if(p>=E){p=0;TweenMax.set(A,{css:{left:-(t*(p+j))}});}else{if(p<0){p=E-1;TweenMax.set(A,{css:{left:-(t*(p+j))}});}}}function e(F){var i=0,G,H;g.each(function(){G=a(this);H=(F==="height")?G.outerHeight(true):G.outerWidth(true);if(H>i){i=H;}});return i;}function k(i){if(d.type==="slide"){z();if(d.draggable&&d.type==="slide"&&x!==undefined){Draggable.get(A).enable();}}g.eq(p+j).addClass("active");if(d.onMoveEnd&&i>0){d.onMoveEnd(p,E,l,g.eq(p+j));}}function C(F,H){H=(H!==undefined)?H:d.speed;var i=F<p?-1:1,G;g.removeClass("active");if(!TweenMax.isTweening(A)&&!TweenMax.isTweening(g)){y=p;p=parseInt(F,10);if(d.type==="fade"){if(p===E&&i===1){p=0;}else{if(p===0&&i===-1){p=E;}}}if(d.onMoveStart&&H>0){d.onMoveStart(p,E,l);}if(d.paginate){q.find("a").removeClass("active").eq(p-1).addClass("active");}switch(d.type){case"slide":G=-(t*(p+j));TweenMax.to(A,H,{css:{left:G},onComplete:k,onCompleteParams:[H]});break;case"fade":TweenMax.to(g.eq(y-1).css("zIndex",1),H,{css:{autoAlpha:0}});TweenMax.to(g.eq(p-1).css("zIndex",2),H,{css:{autoAlpha:1},onComplete:k,onCompleteParams:[H]});break;}}}function r(){A.css("width","");g.css("width","").css("height","");v.css("width","").css("height","");t=e("width");s=e("height");if(d.type==="slide"){A.width(99999);TweenMax.set(A,{css:{left:-(t*(p+j))}});}g.css({width:t+"px",height:s+"px"});v.css({width:(t*f)+"px",height:s+"px"});g.removeClass("active");g.eq(p+j).addClass("active");}function o(i){i=(i!==undefined)?i:d.speed;C(p+1,i);}function n(i){i=i!==undefined?i:d.speed;C(p-1,i);}function D(){h=TweenMax.delayedCall(d.auto,function(){o();D();});}t=e("width");s=e("height");switch(d.type){case"slide":l.addClass("extra-slider-slide");g.first().before(g.slice(-(f+d.margin)).clone().addClass("cloned"));g.last().after(g.slice(0,f+d.margin).clone().addClass("cloned"));g=A.find("> li");j=g.filter(".cloned").size()/2;break;case"fade":l.addClass("extra-slider-fade");g.each(function(F){if(F===0){TweenMax.set(a(this),{css:{autoAlpha:1,zIndex:2}});}else{TweenMax.set(a(this),{css:{autoAlpha:0,zIndex:1}});}});break;}a(this).on("update",function(){r();});a(this).on("next",function(i,F){o(F);});a(this).on("prev",function(i,F){n(F);});a(this).on("goto",function(i,F,G){G=G!==undefined?G:d.speed;C(F,G);});if(d.resizable){b.on("resize",function(){r();});}if(d.navigate&&u.length){a("a.prev",u).click(function(){n();return false;});a("a.next",u).click(function(){o();return false;});}if(d.paginate&&q.length){for(w=0;w<E;w+=1){a("<a>",{href:"#"}).html(d.paginateContent!==""?d.paginateContent:w+1).appendTo(q);}q.find("a").removeClass("active").eq(p-1).addClass("active");a("a",q).each(function(F){a(this).click(function(){if(F+1!==p){C(F+1);}return false;});});}if(d.keyboard){b.on("keydown",function(i){if(i.which===39){o();}if(i.which===37){n();}});}if(!isNaN(d.auto)&&d.auto>0){D();l.on("mouseenter pause",function(){if(d.onPause){d.onPause(l);}h.pause();}).on("mouseleave resume",function(){if(d.onResume){d.onResume(l);}h.resume();});}if(d.draggable&&d.type==="slide"){l.addClass("extra-slider-draggable");if(Draggable!==undefined){x=Draggable.create(A,{type:"left",cursor:"move",onDragStart:function(){l.addClass("extra-slider-mouse-down");m=parseFloat(A.css("left"));},onDragEnd:function(){Draggable.get(A).disable();B=((m-this.x)>0)?-1:1;l.removeClass("extra-slider-mouse-down");if(B===1){n();}else{o();}}});}else{console.log("Draggable is not detected. You need to load it to enable drag. More info here : http://www.greensock.com/draggable/");}}if(d.onInit){d.onInit(p,E,l);}r();b.load(function(){r();});});return this;};}(jQuery));