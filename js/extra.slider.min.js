!function(e){"use strict";var t=e(window);e.fn.extraSlider=function(n){var a=e.extend({auto:!1,draggable:!1,dragWindow:!1,dragWindowObject:t,ease:Quad.easeOut,forcedDimensions:!0,keyboard:!1,margin:0,minDrag:0,navigate:!0,navigation:null,paginate:!0,pagination:null,paginateContent:"",resizable:!0,resizeEvent:"resize",speed:.5,type:"slide",onGotoNext:null,onGotoPrev:null,onInit:null,onMoveEnd:null,onMoveStart:null,onPause:null,onResume:null,onUpdate:null,onUpdateClones:null},n);return this.each(function(){function n(){z>T?z=0:0>z&&(z=T);var e=-(D*z+C*y);TweenMax.set(m,{x:e})}function o(t){var n,a,o=0;return w.not(".cloned").each(function(){n=e(this),a="height"===t?n.outerHeight(!0):n.outerWidth(!0),a>o&&(o=a)}),o}function i(e,t){"slide"===a.type?n():"fade"===a.type&&t.length&&TweenMax.set(t.hide(),{autoAlpha:0}),w.eq(z+C).addClass("active"),!isNaN(a.auto)&&a.auto>0&&u(),a.onMoveEnd&&e>0&&a.onMoveEnd(w.eq(z+C),T+1,v),v.trigger("moveEnd.extra.slider",[w.eq(z+C),T+1,v])}function s(t,n){if(t!==z){n=void 0!==n?n:a.speed;var o,s;w.removeClass("active"),TweenMax.isTweening(m)||TweenMax.isTweening(w)||(k=z,z=parseInt(t,10),("fade"===a.type||"custom"===a.type)&&(z>T?z=0:0>z&&(z=T)),o=z,o>T?o=0:0>o&&(o=T),a.onMoveStart&&n>0&&a.onMoveStart(w.eq(o+C),T+1,v),v.trigger("moveStart.extra.slider",[w.eq(o+C),T+1,v]),a.paginate&&b.each(function(){e(this).find("a").removeClass("active").eq(o).addClass("active")}),"slide"===a.type?(s=-(D*z+C*y),0!==I&&(z>T&&(s+=y*I),0>z&&(s-=y*I)),TweenMax.to(m,n,{x:s,onComplete:i,onCompleteParams:[n],ease:a.ease})):"fade"===a.type&&(w.eq(k).css("zIndex",1),TweenMax.to(w.eq(z).show().css("zIndex",2),n,{css:{autoAlpha:1},onComplete:i,onCompleteParams:[n,w.eq(k)]})))}}function r(){var e;return a.forcedDimensions&&(TweenMax.set(m,{clearProps:"width"}),TweenMax.set([m,w,x],{clearProps:"width,height"})),y=o("width"),q=o("height"),D=y*P,e=Math.max(1,Math.floor(x.width()/y)),e!==P?(P=e,T=Math.floor((w.not(".cloned").length-1)/P),I=Math.abs((T+1)*P-w.not(".cloned").length),"slide"===a.type&&d(),r(),!1):(a.forcedDimensions&&(w.css({width:y+"px",height:q+"px"}),x.css({width:D+"px",height:q+"px"})),"slide"===a.type&&(n(),m.width(99999)),w.removeClass("active"),w.eq(z+C).addClass("active"),a.onUpdate&&a.onUpdate(w.eq(z+C),T+1,v),v.trigger("update.extra.slider",[w.eq(z+C),T+1,v]),void(h&&h.update()))}function d(){w.find(".cloned").remove(),w.first().before(w.slice(-(P+a.margin+I)).clone(!0).addClass("cloned")),w.last().after(w.slice(0,P+a.margin+I).clone(!0).addClass("cloned")),w=m.find("> li"),C=w.filter(".cloned").size()/2||0,a.onUpdateClones&&a.onUpdateClones(w.eq(z+C),T+1,v),v.trigger("updateClones.extra.slider",[w.eq(z+C),T+1,v])}function l(e){v.trigger("gotoNext.extra.slider",[v]),a.onGotoNext&&a.onGotoNext(v),e=void 0!==e?e:a.speed,s(z+1,e)}function c(e){v.trigger("gotoPrev.extra.slider",[v]),a.onGotoPrev&&a.onGotoPrev(v),e=void 0!==e?e:a.speed,s(z-1,e)}function u(){g&&g.kill(),g=TweenMax.delayedCall(a.auto,function(){l(),u()})}var g,h,p,f,v=e(this),x=e("> .wrapper",this),m=x.find("> ul"),w=m.find("> li"),C=0,M=a.navigation||v.find(".navigation"),b=a.pagination||v.find(".pagination"),y=0,q=0,T=w.length-1,P=-1,D=y,z=0,k=T,I=0,N=0;if(a.draggable&&(a.margin+=1),w.each(function(t){e(this).data("index",t)}),y=o("width"),q=o("height"),"slide"===a.type?v.addClass("extra-slider-slide"):"fade"===a.type&&(v.addClass("extra-slider-fade"),w.each(function(t){t===z?TweenMax.set(e(this),{css:{autoAlpha:1,zIndex:2}}):TweenMax.set(e(this),{css:{autoAlpha:0,zIndex:1}})})),e(this).on("update",function(){r()}),e(this).on("next",function(e,t){l(t)}),e(this).on("prev",function(e,t){c(t)}),e(this).on("goto",function(e,t,n){n=void 0!==n?n:a.speed,s(t,n)}),a.resizable&&t.on(a.resizeEvent,function(){r()}),a.navigate&&(M.length||(M=e('<div class="navigation"><a href="#" class="prev">Previous</a><a href="#" class="next">Next</a></div>').insertAfter(x)),e("a.prev",M).on("click",function(){return c(),!1}),e("a.next",M).on("click",function(){return l(),!1})),a.paginate){if(b.length||(b=e('<div class="pagination"></div>').insertAfter(x)),""!==a.paginateContent&&a.paginateContent.length>0)for(b.empty(),N=0;T>=N;N+=1)e("<a>",{href:"#"}).html(""!==a.paginateContent?a.paginateContent.replace("%d",N+1):N+1).appendTo(b);b.each(function(){e(this).find("a").removeClass("active").eq(z).addClass("active"),e("a",e(this)).each(function(t){e(this).click(function(){return e(this).hasClass("active")||e(this).hasClass("disabled")||s(t),!1})})})}a.keyboard&&t.on("keydown",function(e){39===e.which&&l(),37===e.which&&c()}),!isNaN(a.auto)&&a.auto>0&&(u(),v.on("mouseenter pause",function(){a.onPause&&a.onPause(v),v.trigger("pause.extra.slider",[v]),g.pause()}).on("mouseleave resume",function(){a.onResume&&a.onResume(v),v.trigger("resume.extra.slider",[v]),g.resume()})),a.draggable&&"slide"===a.type&&(v.addClass("extra-slider-draggable"),void 0!==Draggable?(Draggable.create(m,{type:"x",cursor:"move",lockAxis:!1,throwProps:!0,zIndexBoost:!1,onDrag:function(){var e,t,n=-(h.x/y)-C;(0>n%(T+1)||n>=T+1)&&(0>n%(T+1)&&(n%=T+1),e=0>n?T+(1+n):n-(T+1),t=-(D*e+C*y),0!==I&&(e>T&&(t+=y*I),0>e&&(t-=y*I)),TweenMax.set(m,{x:t}))},onDragStart:function(){h.update(),p=h.x,f=z},onDragEnd:function(){var e,t,n,o=h.x;h.update(),e=-(h.x/y)-C,t=Math.round(e),Math.abs(o-p)<a.minDrag?t=t>=T?T+1:f:p>o?f%(T+1)===t%(T+1)&&(t+=1):f%(T+1)===t%(T+1)&&(t-=1),n=-(D*t+C*y),0!==I&&(t>T&&(n+=y*I),0>t&&(n-=y*I)),z=t,TweenMax.to(m,a.speed,{x:n,onComplete:function(){r()}})}}),h=Draggable.get(m)):console.log("Draggable is not detected. You need to load it to enable drag. More info here : http://www.greensock.com/draggable/")),r(),t.load(function(){r()}),a.onInit&&a.onInit(w.eq(z+C),T+1,v),v.addClass("extra-slider-processed").trigger("init.extra.slider",[w.eq(z+C),T+1,v]),s(0)}),this}}(jQuery);