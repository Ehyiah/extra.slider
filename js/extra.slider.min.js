!function(e){"use strict";var t=e(window);e.fn.extraSlider=function(n){var a=e.extend({auto:!1,draggable:!1,ease:Quad.easeOut,forcedDimensions:!0,keyboard:!1,margin:0,minDrag:0,navigate:!0,navigation:null,paginate:!0,pagination:null,paginateContent:"",resizable:!0,resizeEvent:"resize",speed:.5,startAt:0,type:"slide",onGotoNext:null,onGotoPrev:null,onInit:null,onMoveEnd:null,onMoveStart:null,onPause:null,onResume:null,onUpdate:null,onDragStart:null,onDragEnd:null,onDragRepositioned:null},n);return this.each(function(){function n(){z>b?z=0:0>z&&(z=b);var e=-(P*z+C*D);TweenMax.set(m,{x:e})}function o(t){var n,a,o=0;return w.not(".cloned").each(function(){n=e(this),a="height"===t?n.outerHeight(!0):n.outerWidth(!0),a>o&&(o=a)}),o}function i(e,t){"slide"===a.type?n():"fade"===a.type&&t.length&&TweenMax.set(t.hide(),{autoAlpha:0}),w.eq(z+C).addClass("active"),!isNaN(a.auto)&&a.auto>0&&c(),a.onMoveEnd&&e>0&&a.onMoveEnd(w.eq(z+C),b+1,x),x.trigger("extra:slider:moveEnd",[w.eq(z+C),b+1,x])}function r(t,n){if(t!==z){n=void 0!==n?n:a.speed;var o,r;w.removeClass("active"),TweenMax.isTweening(m)||TweenMax.isTweening(w)||(E=z,z=parseInt(t,10),("fade"===a.type||"custom"===a.type)&&(z>b?z=0:0>z&&(z=b)),o=z,o>b?o=0:0>o&&(o=b),a.onMoveStart&&n>0&&a.onMoveStart(w.eq(o+C),b+1,x),x.trigger("extra:slider:moveStart",[w.eq(z+C),b+1,x]),a.paginate&&M.each(function(){e(this).find("a").removeClass("active").eq(o).addClass("active")}),"slide"===a.type?(r=-(P*z+C*D),0!==S&&(z>b&&(r+=D*S),0>z&&(r-=D*S)),TweenMax.to(m,n,{x:r,onComplete:i,onCompleteParams:[n],ease:a.ease})):"fade"===a.type&&(w.eq(E).css("zIndex",1),TweenMax.to(w.eq(z).show().css("zIndex",2),n,{css:{autoAlpha:1},onComplete:i,onCompleteParams:[n,w.eq(E)]})))}}function s(){var e;return a.forcedDimensions&&(TweenMax.set(m,{clearProps:"width"}),TweenMax.set([m,w,v],{clearProps:"width,height"})),D=o("width"),y=o("height"),P=D*T,e=Math.max(1,Math.floor(v.width()/D)),e!==T?(T=e,b=Math.floor((w.not(".cloned").length-1)/T),S=Math.abs((b+1)*T-w.not(".cloned").length),"slide"===a.type&&d(),s(),!1):(a.forcedDimensions&&(w.css({width:D+"px",height:y+"px"}),v.css({width:P+"px",height:y+"px"})),"slide"===a.type&&(n(),m.width(99999)),w.removeClass("active"),w.eq(z+C).addClass("active"),a.onUpdate&&a.onUpdate(w.eq(z+C),b+1,x),x.trigger("extra:slider:update",[w.eq(z+C),b+1,x]),void(h&&h.update()))}function d(){w.find(".cloned").remove(),w.first().before(w.slice(-(T+a.margin+S)).clone(!0).addClass("cloned")),w.last().after(w.slice(0,T+a.margin+S).clone(!0).addClass("cloned")),w=m.find("> li"),C=w.filter(".cloned").size()/2||0,a.onUpdateClones&&a.onUpdateClones(w.eq(z+C),b+1,x),x.trigger("extra:slider:updateClones",[w.eq(z+C),b+1,x])}function l(e){a.onGotoNext&&a.onGotoNext(x),x.trigger("extra:slider:onGotoNext",[w.eq(z+C),b+1,x]),e=void 0!==e?e:a.speed,r(z+1,e)}function g(e){a.onGotoPrev&&a.onGotoPrev(x),x.trigger("extra:slider:onGotoPrev",[w.eq(z+C),b+1,x]),e=void 0!==e?e:a.speed,r(z-1,e)}function c(){u&&u.kill(),u=TweenMax.delayedCall(a.auto,function(){l(),c()})}var u,h,p,f,x=e(this),v=e("> .wrapper",this),m=v.find("> ul"),w=m.find("> li"),C=0,q=a.navigation||x.find(".navigation"),M=a.pagination||x.find(".pagination"),D=0,y=0,b=w.length-1,T=-1,P=D,z=a.startAt,E=b,S=0,k=0;if(a.draggable&&(a.margin+=1),w.each(function(t){e(this).data("index",t)}),D=o("width"),y=o("height"),"slide"===a.type?x.addClass("extra-slider-slide"):"fade"===a.type&&(x.addClass("extra-slider-fade"),w.each(function(t){t===z?TweenMax.set(e(this),{css:{autoAlpha:1,zIndex:2}}):TweenMax.set(e(this),{css:{autoAlpha:0,zIndex:1}})})),e(this).on("update",function(){s()}),e(this).on("next",function(e,t){l(t)}),e(this).on("prev",function(e,t){g(t)}),e(this).on("goto",function(e,t,n){n=void 0!==n?n:a.speed,r(t,n)}),a.resizable&&t.on(a.resizeEvent,function(){s()}),a.navigate&&(q.length||(q=e('<div class="navigation"><a href="#" class="prev">Previous</a><a href="#" class="next">Next</a></div>').insertAfter(v)),e("a.prev",q).on("click",function(){return g(),!1}),e("a.next",q).on("click",function(){return l(),!1})),a.paginate){if(M.length||(M=e('<div class="pagination"></div>').insertAfter(v)),""!==a.paginateContent&&a.paginateContent.length>0)for(M.empty(),k=0;b>=k;k+=1)e("<a>",{href:"#"}).html(""!==a.paginateContent?a.paginateContent.replace("%d",k+1):k+1).appendTo(M);M.each(function(){e(this).find("a").removeClass("active").eq(z).addClass("active"),e("a",e(this)).each(function(t){e(this).click(function(){return e(this).hasClass("active")||e(this).hasClass("disabled")||r(t),!1})})})}a.keyboard&&t.on("keydown",function(e){39===e.which&&l(),37===e.which&&g()}),!isNaN(a.auto)&&a.auto>0&&(c(),x.on("mouseenter pause",function(){a.onPause&&a.onPause(x),x.trigger("extra:slider:pause",[w.eq(z+C),b+1,x]),u.pause()}).on("mouseleave resume",function(){a.onResume&&a.onResume(x),x.trigger("extra:slider:resume",[w.eq(z+C),b+1,x]),u.resume()})),a.draggable&&"slide"===a.type&&(x.addClass("extra-slider-draggable"),void 0!==Draggable?(Draggable.create(m,{type:"x",cursor:"move",lockAxis:!1,throwProps:!0,zIndexBoost:!1,onDrag:function(){var e,t,n=-(h.x/D)-C;(0>n%(b+1)||n>=b+1)&&(0>n%(b+1)&&(n%=b+1),e=0>n?b+(1+n):n-(b+1),t=-(P*e+C*D),0!==S&&(e>b&&(t+=D*S),0>e&&(t-=D*S)),TweenMax.set(m,{x:t}))},onDragStart:function(){h.update(),p=h.x,f=z,a.onDragStart&&a.onDragStart(w.eq(z+C),b+1,x),x.trigger("extra:slider:onDragStart",[w.eq(z+C),b+1,x])},onDragEnd:function(){var e,t,n,o=h.x;h.update(),e=-(h.x/D)-C,t=Math.round(e),Math.abs(o-p)<a.minDrag?t=t>=b?b+1:f:p>o?f%(b+1)===t%(b+1)&&(t+=1):f%(b+1)===t%(b+1)&&(t-=1),n=-(P*t+C*D),0!==S&&(t>b&&(n+=D*S),0>t&&(n-=D*S)),z=t,TweenMax.to(m,a.speed,{x:n,ease:a.ease,onComplete:function(){s(),a.onDragRepositioned&&a.onDragRepositioned(w.eq(z+C),b+1,x),x.trigger("extra:slider:onDragRepositioned",[w.eq(z+C),b+1,x])}}),a.onDragEnd&&a.onDragEnd(w.eq(z+C),b+1,x),x.trigger("extra:slider:onDragEnd",[w.eq(z+C),b+1,x])}}),h=Draggable.get(m)):console.log("Draggable is not detected. You need to load it to enable drag. More info here : http://www.greensock.com/draggable/")),s(),t.load(function(){s()}),a.onInit&&a.onInit(w.eq(z+C),b+1,x),x.addClass("extra-slider-processed").trigger("extra:slider:init",[w.eq(z+C),b+1,x]),r(0)}),this}}(jQuery);