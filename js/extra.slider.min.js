(function(a){if(typeof $window=="undefined"){$window=a(window);}a.fn.extraSlider=function(b){var c=a.extend({auto:false,draggable:false,keyboard:false,margin:0,navigate:true,paginate:true,paginateContent:"",resizable:true,speed:0.5,type:"slide",onInit:null,onMoveStart:null,onMoveEnd:null,onPause:null,onResume:null},b);this.each(function(){var k=a(this),u=a("> .wrapper",this),y=u.find("> ul"),f=y.find("> li"),h,t=k.find(".navigation"),p=k.find(".pagination"),s=d("width"),r=d("height"),C=f.length,e=Math.ceil(u.width()/s),o=1,w=C,g,v,l=0,z;switch(c.type){default:case"slide":k.addClass("extra-slider-slide");f.first().before(f.slice(-(e+c.margin)).clone().addClass("cloned"));f.last().after(f.slice(0,e+c.margin).clone().addClass("cloned"));f=y.find("> li");h=f.filter(".cloned").size()/2;break;case"fade":k.addClass("extra-slider-fade");f.each(function(D){if(D==0){TweenMax.set(a(this),{css:{autoAlpha:1,zIndex:2}});}else{TweenMax.set(a(this),{css:{autoAlpha:0,zIndex:1}});}});break;}function A(E,G){G=typeof G!=="undefined"?G:c.speed;var D=E<o?-1:1,F;f.removeClass("active");if(!TweenMax.isTweening(y)&&!TweenMax.isTweening(f)){w=o;o=parseInt(E);if(c.type=="fade"){if(o==C&&D==1){o=0;}else{if(o==0&&D==-1){o=C;}}}if(c.onMoveStart&&G>0){c.onMoveStart(o,C,k);}if(c.paginate){p.find("a").removeClass("active").eq(o-1).addClass("active");}switch(c.type){default:case"slide":F=-(s*(o+h));TweenMax.to(y,G,{css:{left:F},onComplete:j,onCompleteParams:[G]});break;case"fade":TweenMax.to(f.eq(w-1).css("zIndex",1),G,{css:{autoAlpha:0}});TweenMax.to(f.eq(o-1).css("zIndex",2),G,{css:{autoAlpha:1},onComplete:j,onCompleteParams:[G]});break;}}}function n(D){D=typeof D!=="undefined"?D:c.speed;A(o+1,D);}function m(D){D=typeof D!=="undefined"?D:c.speed;A(o-1,D);}function q(){y.css("width","");f.css("width","").css("height","");u.css("width","").css("height","");s=d("width");r=d("height");if(c.type=="slide"){y.width(99999);TweenMax.set(y,{css:{left:-(s*(o+h))}});}f.css({width:s+"px",height:r+"px"});u.css({width:(s*e)+"px",height:r+"px"});f.removeClass("active");f.eq(o+h).addClass("active");}function j(D){if(c.type==="slide"){x();if(c.draggable&&c.type=="slide"&&typeof(v)!="undefined"){Draggable.get(y).enable();}}f.eq(o+h).addClass("active");if(c.onMoveEnd&&D>0){c.onMoveEnd(o,C,k,f.eq(o+h));}}function x(){if(o>=C){o=0;TweenMax.set(y,{css:{left:-(s*(o+h))}});}else{if(o<0){o=C-1;TweenMax.set(y,{css:{left:-(s*(o+h))}});}}}function d(E){var D=0,F,G;f.each(function(){F=a(this),G=(E=="height")?F.outerHeight(true):F.outerWidth(true);if(G>D){D=G;}});return D;}a(this).on("update",function(){q();});a(this).on("next",function(D,E){n(E);});a(this).on("prev",function(D,E){m(E);});a(this).on("goto",function(D,E,F){F=typeof F!=="undefined"?F:c.speed;A(E,F);});if(c.resizable){$window.on("resize",function(){q();});}if(c.navigate&&t.length){a("a.prev",t).click(function(){m();return false;});a("a.next",t).click(function(){n();return false;});}if(c.paginate&&p.length){for(i=0;i<C;i++){a("<a>",{href:"#"}).html(c.paginateContent!=""?c.paginateContent:i+1).appendTo(p);}p.find("a").removeClass("active").eq(o-1).addClass("active");a("a",p).each(function(D){a(this).click(function(){if(D+1!=o){A(D+1);}return false;});});}if(c.keyboard){$window.on("keydown",function(D){if(D.which==39){n();}if(D.which==37){m();}});}if(!isNaN(c.auto)&&c.auto>0){function B(){g=TweenMax.delayedCall(c.auto,function(){n();B();});}B();k.on("mouseenter pause",function(){if(c.onPause){c.onPause(k);}g.pause();}).on("mouseleave resume",function(){if(c.onResume){c.onResume(k);}g.resume();});}if(c.draggable&&c.type=="slide"){k.addClass("extra-slider-draggable");if(typeof(Draggable)!="undefined"){v=Draggable.create(y,{type:"left",cursor:"move",onDragStart:function(){k.addClass("extra-slider-mouse-down");l=parseFloat(y.css("left"));},onDragEnd:function(){Draggable.get(y).disable();z=((l-this.x)>0)?-1:1;k.removeClass("extra-slider-mouse-down");if(z==1){m();}else{if(z==-1){n();}}}});}else{console.log("Draggable is not detected. You need to load it to enable drag. More info here : http://www.greensock.com/draggable/");}}if(c.onInit){c.onInit(o,C,k);}q();$window.load(function(){q();});});return this;};})(jQuery);